CREATE TABLE AUTHORITY (
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
    NAME VARCHAR(255),
    CREATED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    IS_DELETED BOOLEAN DEFAULT FALSE,
    PRIMARY KEY (ID)
);

ALTER TABLE AUTHORITY ADD CONSTRAINT AUTHORITY_NAME UNIQUE(NAME);

CREATE TABLE USER_ (
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
    PASSWORD VARCHAR(255),
    USER_NAME VARCHAR(255),
    AUTHORITY_ID BIGINT NOT NULL,
    ACCOUNT_EXPIRED BOOLEAN DEFAULT FALSE,
    ACCOUNT_LOCKED BOOLEAN DEFAULT FALSE,
    CREDENTIALS_EXPIRED BOOLEAN DEFAULT FALSE,
    ENABLED BOOLEAN DEFAULT TRUE,
    CREATED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    IS_DELETED BOOLEAN DEFAULT FALSE,
    PRIMARY KEY (ID)
);

ALTER TABLE USER_ ADD CONSTRAINT USER_USER_NAME UNIQUE(USER_NAME);
ALTER TABLE USER_ ADD CONSTRAINT USER__AUTHORITY FOREIGN KEY (AUTHORITY_ID) REFERENCES AUTHORITY;
